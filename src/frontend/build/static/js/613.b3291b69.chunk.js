"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[613],{31613:function(n,e,t){t.r(e),t.d(e,{default:function(){return tn}});var r=t(29439),s=t(72791),a=t(16871),u=t(92817),i=t(33553),o=t(55132),c=t(11115),l=t(13373),f=t(74485),d=t(22659),m=t(98729),x=t(1490),g=t(15671),v=t(43144),h=t(763),p=t.n(h),_=t(46556),b=function(){function n(e){(0,g.Z)(this,n),this.rawData=void 0,this.rawData=null===e?j:e}return(0,v.Z)(n,[{key:"hasLoaded",value:function(){return 0!==this.rawData.username.length}},{key:"getUsername",value:function(){return this.rawData.username}},{key:"getNoOfSignUps",value:function(){return this.rawData.no_of_sign_ups}},{key:"getNoOfSubscribers",value:function(){return this.rawData.no_of_subscribers}},{key:"getBankAccountNumber",value:function(){return this.rawData.bank_account_number}},{key:"setBankAccountNumber",value:function(e){var t=p().clone(this.rawData);return t.bank_account_number=e,new n(t)}}],[{key:"refreshData",value:function(e,t){var r=c.cx.BASE_URL,s=c.cx.AFF_INIT_DATA_URL;i.e.get({url:"".concat(r,"/").concat(s,"/"),successFunc:function(t){e(new n(t.data))},errorFunc:function(n){t.error("Sorry. Something went wrong.")}})}}]),n}(),j={username:"",no_of_sign_ups:0,no_of_subscribers:0,bank_account_number:void 0},w=function(){var n=(0,s.useState)(new b(j)),e=(0,r.Z)(n,2),t=e[0],a=e[1],u=(0,s.useContext)(_.uL);return(0,s.useEffect)((function(){b.refreshData(a,u)}),[]),[t,a]},F=t(80184),A=function(n){var e=n.submitValues,t=n.storageService,r=n.navigate,a=n.setAffiliateData,u=(0,s.useContext)(_.uL);return(0,F.jsx)(l.l0,{title:"Log In",initialValues:{username:"",password:""},validationSchema:l.sm.object({username:l.sm.string().required(),password:l.sm.string().required()}),onSubmit:function(n){var s=n.values,i=n.setErrors,o=n.setSubmitting,l=n.setSuccessMsg,f=n.setNonFieldError;e({values:s,successFunc:function(n){t.setItem(c._2.TOKEN_KEY,n.data.key),b.refreshData(a,u),r("/".concat(c.Uy.AFF_APP_ROUTE,"/").concat(c.Uy.AFF_OVERVIEW_ROUTE)),f("")},errorFunc:function(n){try{var e=(0,x.oO)(n.response.data,{username:"username",password:"password"});i(e),f(e.non_field_errors)}catch(n){f(m.P.unexpectedErr())}l("")},thenFunc:function(){return o(!1)}})},children:function(n){var e=n.values,t=n.errors,r=n.isSubmitting,s=n.submitForm;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(l.oi,{name:"username",placeholder:"Username","data-testid":"username"}),(0,F.jsx)(l.oi,{name:"password",placeholder:"Password",type:"password","data-testid":"password"}),(0,F.jsx)(f.zx,{onClick:(0,x.Cw)(t,e)?function(){return s()}:function(){},"data-testid":"submit-button",disabled:!(0,x.Cw)(t,e),children:r?(0,F.jsx)(d.Z,{}):"Log In"})]})}})},N=function(n){var e=n.setAffiliateData,t=(0,a.s0)();return(0,F.jsx)(l.uL,{form:(0,F.jsx)(A,{submitValues:function(n){var e=c.cx.BASE_URL,t=c.cx.AFF_LOGIN_URL;o.Z.post({url:"".concat(e,"/").concat(t,"/"),noToken:!0,data:n.values,successFunc:function(e){n.successFunc(e)},errorFunc:function(e){n.errorFunc(e)},thenFunc:n.thenFunc})},storageService:localStorage,navigate:t,setAffiliateData:e})})},k=t(1413),Z=t(45987),S=t(10310),y=t(87462),R=t(63366),U=t(28182),E=t(90767),L=t(47630),O=t(31402),C=t(10703),P=t(95159);function B(n){return(0,P.Z)("MuiCard",n)}(0,t(30208).Z)("MuiCard",["root"]);var D=["className","raised"],I=(0,L.ZP)(C.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(n,e){return e.root}})((function(){return{overflow:"hidden"}})),T=s.forwardRef((function(n,e){var t=(0,O.Z)({props:n,name:"MuiCard"}),r=t.className,s=t.raised,a=void 0!==s&&s,u=(0,R.Z)(t,D),i=(0,y.Z)({},t,{raised:a}),o=function(n){var e=n.classes;return(0,E.Z)({root:["root"]},B,e)}(i);return(0,F.jsx)(I,(0,y.Z)({className:(0,U.Z)(o.root,r),elevation:a?8:void 0,ref:e,ownerState:i},u))})),z=t(90493),V=t(49900),G=t(50749),M=t(96123),K=t(61889),W=t(21941),Y=["children","sx"],q=function(n){var e=n.username,t=n.signUpLink,r=n.bankAccountNumber,s=n.saveNewBankAccountNumber,a=n.setNewBankAccountNumber;return(0,F.jsx)($,{title:"Your Details",listItems:[(0,F.jsx)(J,{name:"Username",value:e}),(0,F.jsx)(J,{name:"Sign Up Link",value:t}),(0,F.jsx)(Q,{name:"Bank Account number",value:r,saveNewValue:s,setNewBankAccountNumber:a})]})},H=function(n){var e=n.noOfSignUps,t=n.noOfSubscribers,r=n.payout;return(0,F.jsx)($,{title:"Your Stats",listItems:[(0,F.jsx)(J,{name:"Sign Ups",value:e}),(0,F.jsx)(J,{name:"Subscribers",value:t}),(0,F.jsx)(J,{name:"Payout",value:r})]})},$=function(n){var e=n.title,t=n.listItems;return(0,F.jsxs)(T,{sx:{width:"80%",padding:(0,M.dR)("padding-xs")},children:[(0,F.jsx)(G.H4,{style:{textAlign:"center"},children:e}),(0,F.jsx)(z.Z,{children:t})]})},J=function(n){var e=n.name,t=n.value;return(0,F.jsx)(V.Z,{sx:{padding:(0,M.dR)("padding-xs")},children:(0,F.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,F.jsx)(G.P,{children:e}),(0,F.jsx)(G.P,{children:t})]})})},Q=function(n){var e=n.name,t=n.value,a=n.saveNewValue,u=n.setNewBankAccountNumber,i=(0,s.useState)(!1),o=(0,r.Z)(i,2),c=o[0],l=o[1],m=(0,s.useState)(t),x=(0,r.Z)(m,2),g=x[0],v=x[1],h=(0,s.useState)(!1),p=(0,r.Z)(h,2),b=p[0],j=p[1],w=(0,s.useContext)(_.uL);return(0,F.jsx)(V.Z,{sx:{padding:(0,M.dR)("padding-xs")},children:(0,F.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,F.jsx)(G.P,{children:e}),(0,F.jsx)("div",{style:{display:"flex",alignItems:"baseline"},children:c?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(W.II,{hiddenLabel:!0,size:"small",value:g,onChange:function(n){var e=n.target.value;nn(e)&&!b&&v(e)},style:{marginRight:(0,M.dR)("padding-xs")}}),(0,F.jsx)(f.zx,{size:"small",color:"primary",variant:"outlined",style:{marginRight:"5px"},onClick:function(){j(!0),a(g).then((function(){u(parseInt(g))})).catch((function(n){v(t),"error"===n&&w.error("Something went wrong")})).finally((function(){j(!1),l(!1)}))},children:b?(0,F.jsx)(d.Z,{color:(0,M.Lq)("gray")}):"Save"}),b?null:(0,F.jsx)(f.zx,{size:"small",color:"error",variant:"outlined",onClick:function(){l(!1),v(t)},children:"Cancel"})]}):(0,F.jsxs)(F.Fragment,{children:[t,(0,F.jsx)(f.zx,{onClick:function(){l(!0),v(t)},style:{marginLeft:(0,M.dR)("padding-xs")},children:"Edit"})]})})]})})},X=function(n){var e=n.children,t=n.sx,r=(0,Z.Z)(n,Y);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S.Z,{links:[],rightElement:(0,F.jsx)(G.BP,{children:"Affiliate"})}),(0,F.jsx)(K.ZP,(0,k.Z)((0,k.Z)({container:!0,sx:(0,k.Z)({marginTop:"80px"},t)},r),{},{children:e}))]})},nn=function(n){return console.log(n),/^\d+$/.test(n)},en=function(n){var e,t=n.affiliateData,r=n.setNewBankAccountNumber,u=t.getNoOfSignUps().toString(),o=t.getNoOfSubscribers().toString(),l="$".concat(5*t.getNoOfSubscribers()),d=t.getUsername(),m="https://myfxtracker.com/sign-up/".concat(d),x=(0,a.s0)(),g=(0,s.useContext)(_.uL);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(X,{spacing:1,sx:{flexDirection:{xs:"column",sm:"row"}},children:[(0,F.jsx)(K.ZP,{item:!0,container:!0,xs:12,sm:6,sx:{flexDirection:{sm:"row-reverse"},justifyContent:{xs:"center",sm:"flex-start"}},children:(0,F.jsx)(H,{noOfSignUps:u,noOfSubscribers:o,payout:l})}),(0,F.jsx)(K.ZP,{item:!0,container:!0,xs:12,sm:6,sx:{justifyContent:{xs:"center",sm:"flex-start"}},children:(0,F.jsx)(q,{username:d,signUpLink:m,bankAccountNumber:(e=t.getBankAccountNumber(),void 0!==e&&null!==e?e.toString():"0"),saveNewBankAccountNumber:function(n){var e=c.cx.BASE_URL,t=c.cx.AFF_CHANGE_BANK_ACCOUNT_NUMBER_URL;return console.log(n),new Promise((function(r,s){return i.e.post({url:"".concat(e,"/").concat(t,"/"),data:{bank_account_number:n},successFunc:function(n){r()},errorFunc:function(n){s("error")},timeoutErrorFunc:function(){s("timeout")},networkErrorFunc:function(){s("network")}})}))},setNewBankAccountNumber:r})})]}),(0,F.jsx)(K.ZP,{container:!0,sx:{alignItems:"center",justifyContent:"center",marginTop:(0,M.dR)("padding-xs"),marginBottom:(0,M.dR)("padding-big")},children:(0,F.jsx)(f.zx,{variant:"outlined",style:{alignSelf:"center"},onClick:function(){var n=c.Uy.AFF_APP_ROUTE,e=c.Uy.AFF_LOG_IN_ROUTE;(function(){var n=c.cx.BASE_URL,e=c.cx.AFF_LOGOUT_URL;return new Promise((function(t,r){return i.e.delete({url:"".concat(n,"/").concat(e,"/"),successFunc:function(n){t()},errorFunc:function(n){r()}})}))})().then((function(){localStorage.removeItem("KEY"),x("/".concat(n,"/").concat(e,"/"))})).catch((function(){return g.error("Something went wrong.")}))},children:"Log Out"})})]})},tn=function(){var n=w(),e=(0,r.Z)(n,2),t=e[0],o=e[1],l=c.Uy.AFF_APP_ROUTE,f=c.Uy.AFF_LOG_IN_ROUTE,d=c.Uy.AFF_OVERVIEW_ROUTE,m=(0,a.s0)();return(0,s.useEffect)((function(){i.e.initNavigate(m,"/".concat(l,"/").concat(f,"/"))}),[]),(0,F.jsxs)(u.Z,{children:[(0,F.jsx)(a.AW,{path:"".concat(f),element:(0,F.jsx)(N,{setAffiliateData:o})}),(0,F.jsx)(a.AW,{path:"".concat(d),element:(0,F.jsx)(en,{affiliateData:t,setNewBankAccountNumber:function(n){var e=t.setBankAccountNumber(n);o(e)}})})]})}},33553:function(n,e,t){t.d(e,{e:function(){return m},N:function(){return i}});var r=t(29439),s=t(72791),a=t(11115),u=t(55132),i=function(){var n=a.cx.BASE_URL,e=a.cx.GET_ALL_NOTES_URL,t=(0,s.useState)(new Promise((function(n,e){}))),i=(0,r.Z)(t,2),o=i[0],c=i[1];return(0,s.useEffect)((function(){u.Z.get({url:"".concat(n,"/").concat(e,"/"),successFunc:function(n){c(Promise.resolve(n.data))},errorFunc:function(n){c(Promise.resolve(n))}})}),[]),o},o=t(1413),c=a.Uy.INFO_LOGIN_ROUTE,l="/".concat(c),f=function(n,e){return n((0,o.Z)((0,o.Z)({},e),{},{errorFunc:function(n){if(401!==n.response.status&&403!==n.response.status)return e.errorFunc(n);void 0!==d.unauthorizedRedirectRoute?d.navigate(d.unauthorizedRedirectRoute):d.navigate(l)}}))},d=(0,o.Z)((0,o.Z)({},u.Z),{},{get:function(n){return f(u.Z.get,n)},put:function(n){return f(u.Z.put,n)},post:function(n){return f(u.Z.post,n)},delete:function(n){return f(u.Z.delete,n)},navigate:function(n){},unauthorizedRedirectRoute:void 0,initNavigate:function(n,e){this.navigate=n,this.unauthorizedRedirectRoute=e}}),m=d}}]);
//# sourceMappingURL=613.b3291b69.chunk.js.map